#!/bin/bash

# Step 1: Update system packages
sudo apt update -y
sudo apt upgrade -y

# Step 2: Install dependencies (Git, Python, etc.)
sudo apt install -y git python3-pip python3-dev libmysqlclient-dev nano

# Step 3: Clone the GitHub repository containing the code
git clone <your-github-repository-url>
cd <repository-name>

# Step 4: Run the installation and setup commands (you can adjust these as necessary)
chmod +x install_airflow.sh
./install_airflow.sh

# Step 5: Activate the virtual environment (if needed)
source airflow_env/bin/activate

# Step 6: Set AIRFLOW_HOME environment variable
export AIRFLOW_HOME=~/airflow

# Step 7: Initialize Airflow database
airflow db init

# Step 8: Create Airflow admin user
airflow users create -u admin -f Ad -l Min -r Admin -e ad@min.com

# Step 9: Start Airflow webserver and scheduler
airflow webserver --port 8080 &
airflow scheduler &
